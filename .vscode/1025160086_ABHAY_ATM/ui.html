<!--
Single-file ATM simulation (HTML + CSS + JS)
Features:
- Choose Savings or Current account
- Check balance, Deposit, Withdraw, Exit
- Input validation and friendly messages
- Balance persisted in localStorage per account type
- Responsive and simple modern styling
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ABC Bank — ATM</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#60a5fa;
      --muted:#9aa7bd;
      --success:#16a34a;
      --danger:#ef4444;
      --glass: rgba(255,255,255,0.03);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(180deg, #071021 0%, #0b1220 100%);
      color:#e6eef8;
      padding:24px;
    }

    .atm {
      width:100%;
      max-width:920px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px;
      box-shadow: 0 8px 30px rgba(2,6,23,0.7);
      overflow:hidden;
      display:grid;
      grid-template-columns: 360px 1fr;
    }

    .panel-left{
      padding:28px;
      background: linear-gradient(180deg, rgba(96,165,250,0.06), transparent);
      border-right:1px solid rgba(255,255,255,0.03);
      display:flex;
      flex-direction:column;
      gap:18px;
      align-items:flex-start;
    }

    .brand{
      display:flex;align-items:center;gap:12px
    }
    .logo{
      width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#7dd3fc);display:flex;align-items:center;justify-content:center;color:#04263b;font-weight:700;font-size:20px
    }
    h1{font-size:18px;margin:0}
    p.lead{color:var(--muted);margin:0;font-size:13px}

    .selector{width:100%;display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .account-btns{display:flex;gap:8px}
    .btn{
      background:var(--glass);
      color:inherit;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);cursor:pointer;flex:1;font-weight:600
    }
    .btn.active{background:linear-gradient(90deg,var(--accent),#7dd3fc);color:#04263b}

    .small{font-size:13px;color:var(--muted)}

    .panel-right{padding:28px}
    .screen{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0));padding:20px;border-radius:12px;border:1px solid rgba(255,255,255,0.02)}

    .balance{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
    .balance .amount{font-size:22px;font-weight:700}
    .menu{display:flex;gap:10px;margin-bottom:12px}
    .menu button{padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted);cursor:pointer}
    .menu button.active{color:var(--accent);border-color:rgba(96,165,250,0.25);background:rgba(96,165,250,0.03)}

    .controls{display:flex;gap:12px;flex-wrap:wrap}
    .controls input[type=number]{padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;min-width:160px}
    .controls .primary{background:var(--accent);color:#04263b;padding:12px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
    .controls .danger{background:var(--danger);padding:12px 14px;border-radius:10px;border:none;cursor:pointer}

    .log{margin-top:16px;max-height:220px;overflow:auto;padding:12px;border-radius:8px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02)}
    .log p{margin:8px 0;font-size:14px;color:var(--muted)}
    .ok{color:var(--success);font-weight:600}
    .err{color:var(--danger);font-weight:600}

    .footer{margin-top:auto;font-size:12px;color:var(--muted)}

    @media (max-width:820px){
      .atm{grid-template-columns:1fr}
      .panel-left{order:2}
      .panel-right{order:1}
    }
  </style>
</head>
<body>
  <main class="atm" role="main">
    <section class="panel-left">
      <div class="brand">
        <div class="logo">ABC</div>
        <div>
          <h1>ABC Bank ATM</h1>
          <p class="lead">Simple ATM simulator — HTML + CSS + JS</p>
        </div>
      </div>

      <div>
        <div class="small">Select Account Type</div>
        <div class="selector">
          <div class="account-btns">
            <button id="savingsBtn" class="btn" aria-pressed="false">Savings</button>
            <button id="currentBtn" class="btn" aria-pressed="false">Current</button>
          </div>
          <div class="small">Tip: Balance is saved to your browser (localStorage).</div>
        </div>
      </div>

      <div class="footer">Designed for demo purposes. No real money involved.</div>
    </section>

    <section class="panel-right">
      <div class="screen" id="screen">
        <div class="balance">
          <div>
            <div class="small">Selected Account</div>
            <div id="accountLabel" class="amount">—</div>
          </div>
          <div>
            <div class="small">Balance</div>
            <div id="balance" class="amount">$0.00</div>
          </div>
        </div>

        <div class="menu" role="tablist">
          <button id="checkBtn" class="active" data-action="check">Check Balance</button>
          <button id="depositBtn" data-action="deposit">Deposit</button>
          <button id="withdrawBtn" data-action="withdraw">Withdraw</button>
          <button id="exitBtn" data-action="exit">Exit</button>
        </div>

        <div class="controls" id="controls">
          <input type="number" id="amountInput" placeholder="Enter amount (e.g. 25.50)" step="0.01" aria-label="Amount" />
          <button id="actionGo" class="primary">Go</button>
          <button id="clearBtn" class="btn">Clear</button>
        </div>

        <div class="log" id="log" aria-live="polite">
          <p>Welcome — choose an account to begin.</p>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Simple ATM app behavior
    const savingsBtn = document.getElementById('savingsBtn');
    const currentBtn = document.getElementById('currentBtn');

    const accountLabel = document.getElementById('accountLabel');
    const balanceEl = document.getElementById('balance');
    const logEl = document.getElementById('log');

    const menu = document.querySelectorAll('.menu button');
    const amountInput = document.getElementById('amountInput');
    const actionGo = document.getElementById('actionGo');
    const clearBtn = document.getElementById('clearBtn');

    let selectedAccount = null; // 'savings' or 'current'
    let currentAction = 'check';

    // Utility: format money
    function fmt(n){
      return '$' + Number(n).toFixed(2);
    }

    function log(msg, type){
      const p = document.createElement('p');
      p.textContent = msg;
      if(type === 'ok') p.classList.add('ok');
      if(type === 'err') p.classList.add('err');
      logEl.prepend(p);
    }

    function getStorageKey(account){
      return 'abc_atm_balance_' + account;
    }

    function loadBalance(account){
      const raw = localStorage.getItem(getStorageKey(account));
      if(raw === null) return 0.00;
      const val = parseFloat(raw);
      return isNaN(val) ? 0.00 : val;
    }

    function saveBalance(account, val){
      localStorage.setItem(getStorageKey(account), Number(val).toFixed(2));
    }

    function refreshUI(){
      accountLabel.textContent = selectedAccount ? (selectedAccount === 'savings' ? 'Savings Account' : 'Current Account') : '—';
      const bal = selectedAccount ? loadBalance(selectedAccount) : 0.00;
      balanceEl.textContent = fmt(bal);
    }

    function setSelectedAccount(acc){
      selectedAccount = acc;
      savingsBtn.classList.toggle('active', acc === 'savings');
      currentBtn.classList.toggle('active', acc === 'current');
      savingsBtn.setAttribute('aria-pressed', acc === 'savings');
      currentBtn.setAttribute('aria-pressed', acc === 'current');
      log(`Selected ${acc === 'savings' ? 'Savings' : 'Current'} Account`);
      refreshUI();
    }

    // Menu action handling
    menu.forEach(btn => btn.addEventListener('click', e => {
      menu.forEach(b=>b.classList.remove('active'));
      e.currentTarget.classList.add('active');
      currentAction = e.currentTarget.dataset.action;
      amountInput.style.display = (currentAction === 'deposit' || currentAction === 'withdraw') ? 'inline-block' : 'none';
      amountInput.value = '';
      actionGo.textContent = currentAction === 'check' ? 'Refresh' : (currentAction === 'exit' ? 'Exit' : 'Go');
      if(currentAction === 'exit'){
        actionGo.classList.remove('primary');
        actionGo.classList.add('danger');
      } else {
        actionGo.classList.add('primary');
        actionGo.classList.remove('danger');
      }
    }));

    // Initial: hide amount input for check/exit
    amountInput.style.display = 'none';

    // Account buttons
    savingsBtn.addEventListener('click', ()=> setSelectedAccount('savings'));
    currentBtn.addEventListener('click', ()=> setSelectedAccount('current'));

    // Clear button
    clearBtn.addEventListener('click', ()=>{ amountInput.value=''; });

    // Action GO
    actionGo.addEventListener('click', ()=>{
      if(!selectedAccount){ log('Please select an account first.', 'err'); return; }

      const bal = loadBalance(selectedAccount);
      if(currentAction === 'check'){
        log(`Current balance: ${fmt(bal)}`, 'ok');
        refreshUI();
        return;
      }

      if(currentAction === 'exit'){
        log(`Exiting... Final Balance: ${fmt(bal)}`);
        // reset UI selection (simulate card removed)
        setTimeout(()=>{
          selectedAccount = null;
          savingsBtn.classList.remove('active');
          currentBtn.classList.remove('active');
          refreshUI();
          log('Thank you for using ABC Bank ATM.');
        }, 800);
        return;
      }

      // deposit or withdraw
      const raw = amountInput.value;
      const value = parseFloat(raw);
      if(isNaN(value) || value <= 0){ log('Enter a valid positive amount.', 'err'); return; }

      if(currentAction === 'deposit'){
        const newBal = bal + value;
        saveBalance(selectedAccount, newBal);
        log(`Deposited ${fmt(value)} — New balance: ${fmt(newBal)}`, 'ok');
        refreshUI();
        amountInput.value = '';
        return;
      }

      if(currentAction === 'withdraw'){
        if(value > bal){ log('Insufficient balance for this withdrawal.', 'err'); return; }
        const newBal = bal - value;
        saveBalance(selectedAccount, newBal);
        log(`Withdrew ${fmt(value)} — New balance: ${fmt(newBal)}`, 'ok');
        refreshUI();
        amountInput.value = '';
        return;
      }
    });

    // Make Enter key trigger action when amount input visible
    amountInput.addEventListener('keyup', e=>{ if(e.key === 'Enter') actionGo.click(); });

    // Start with no account selected but load any existing balances in the background
    refreshUI();

  </script>
</body>
</html>
